<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Consumer Pay - Smart Financial Planning</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="manifest" href="manifest.webmanifest" />
    <meta name="theme-color" content="#1d3557" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="mobile-web-app-capable" content="yes" />
    <link rel="icon" href="icons/app-icon.svg" type="image/svg+xml" />
    <link rel="apple-touch-icon" href="icons/app-icon.svg" />
  </head>
  <body>
    <div class="page">
      <header class="top-bar">
        <div class="brand">
          <span class="brand-mark"></span>
          <span class="brand-name">Consumer Pay</span>
        </div>
        <div class="top-actions">
          <button class="btn ghost" type="button" data-restart>
            Start Fresh
          </button>
        </div>
      </header>

      <main class="flow">
        <section class="screen is-active" data-screen="welcome">
          <div class="welcome-hero">
            <div class="welcome-content">
              <p class="eyebrow animate-in">Smart money management</p>
              <h1 class="animate-in delay-1">Take control of your finances with confidence</h1>
              <p class="lede animate-in delay-2">
                Enter your UK salary, set your budget, and watch your financial future unfold.
                We'll help you understand exactly where your money goes and how to reach your goals faster.
              </p>
              <div class="cta-row animate-in delay-3">
                <button class="btn primary large" type="button" data-next>
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 12h14M12 5l7 7-7 7"/>
                  </svg>
                  Get Started
                </button>
              </div>
              <div class="feature-pills animate-in delay-4">
                <span class="feature-pill">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="2" y="3" width="20" height="14" rx="2"/><path d="M2 10h20"/>
                  </svg>
                  UK Tax Calculator
                </span>
                <span class="feature-pill">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/>
                  </svg>
                  Budget Breakdown
                </span>
                <span class="feature-pill">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                  </svg>
                  Cash Flow Analysis
                </span>
                <span class="feature-pill">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/>
                  </svg>
                  Goal Tracking
                </span>
              </div>
            </div>
            <div class="welcome-visual">
              <div class="hero-card primary">
                <div class="hero-icon">
                  <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/>
                  </svg>
                </div>
                <p class="hero-label">Monthly Take-Home</p>
                <p class="hero-value">See your real income</p>
              </div>
              <div class="hero-card secondary">
                <div class="hero-icon">
                  <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                  </svg>
                </div>
                <p class="hero-label">Smart Projections</p>
                <p class="hero-value">30-year forecasting</p>
              </div>
              <div class="hero-card tertiary">
                <div class="hero-icon">
                  <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
                    <circle cx="12" cy="7" r="4"/>
                  </svg>
                </div>
                <p class="hero-label">Personalized</p>
                <p class="hero-value">Tailored to you</p>
              </div>
            </div>
          </div>
        </section>

        <section class="screen" data-screen="login">
          <div class="screen-card">
            <h2>Sign in</h2>
            <p class="muted">
              All journeys are consumer-first and built around your goals.
            </p>
            <form class="form-grid">
              <label>
                Email
                <input type="email" placeholder="you@email.com" />
              </label>
              <label>
                Password
                <input type="password" placeholder="Your password" />
              </label>
              <button class="btn secondary" type="button">
                Continue with Apple
              </button>
            </form>
            <div class="screen-actions">
              <button class="btn ghost" type="button" data-back>Back</button>
              <button class="btn primary" type="button" data-next>
                Continue
              </button>
            </div>
          </div>
        </section>

        <section class="screen" data-screen="focus">
          <div class="screen-card">
            <div class="screen-header">
              <span class="step-badge">Step 1 of 4</span>
              <h2>Let's personalise your experience</h2>
              <p class="muted">
                Tell us a bit about yourself so we can tailor your financial plan.
              </p>
            </div>
            <div class="form-grid">
              <label>
                What should we call you?
                <input type="text" placeholder="Your first name" data-field="name" />
              </label>
              <div>
                <p class="field-label">What's your main financial focus?</p>
                <div class="choice-group" data-choice-group="focus">
                  <button type="button" data-value="saving">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2V5z"/>
                      <path d="M2 9v1c0 1.1.9 2 2 2h1"/>
                    </svg>
                    Save more
                  </button>
                  <button type="button" data-value="investing">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                    </svg>
                    Start investing
                  </button>
                  <button type="button" data-value="protection">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    </svg>
                    Protect family
                  </button>
                  <button type="button" data-value="income">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/>
                    </svg>
                    Grow income
                  </button>
                </div>
              </div>
              <div>
                <p class="field-label">How far ahead are you planning?</p>
                <div class="choice-group" data-choice-group="horizon">
                  <button type="button" data-value="short">0-2 years</button>
                  <button type="button" data-value="mid">2-7 years</button>
                  <button type="button" data-value="long">7+ years</button>
                </div>
              </div>
              <div>
                <p class="field-label">What's your money style?</p>
                <div class="choice-group persona-group" data-choice-group="persona">
                  <button type="button" data-value="builder">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/>
                      <rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/>
                    </svg>
                    Builder
                  </button>
                  <button type="button" data-value="balancer">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/><path d="M8 12h8M12 8v8"/>
                    </svg>
                    Balancer
                  </button>
                  <button type="button" data-value="protector">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    </svg>
                    Protector
                  </button>
                  <button type="button" data-value="explorer">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"/>
                    </svg>
                    Explorer
                  </button>
                </div>
                <div class="persona-preview">
                  <p class="persona-label">Your money personality</p>
                  <h3 data-persona-title>Builder</h3>
                  <p data-persona-copy>
                    You like structure, measurable goals, and automated progress.
                  </p>
                  <div class="persona-tags" data-persona-tags>
                    <span>Goal focused</span>
                    <span>Auto save</span>
                    <span>Long term clarity</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="screen-actions">
              <button class="btn ghost" type="button" data-back>Back</button>
              <button class="btn primary" type="button" data-next>
                Continue
              </button>
            </div>
          </div>
        </section>

        <section class="screen" data-screen="snapshot">
          <div class="screen-card salary-card">
            <div class="screen-header">
              <span class="step-badge">Step 2 of 4</span>
              <h2>Your UK Salary Calculator</h2>
              <p class="muted">
                Enter your annual salary and we'll calculate your monthly take-home pay after tax and National Insurance.
              </p>
            </div>

            <div class="salary-calculator">
              <div class="salary-input-section">
                <label class="salary-label">
                  <span class="label-text">Annual Gross Salary</span>
                  <div class="salary-input-wrap">
                    <span class="currency-symbol">£</span>
                    <input type="number" min="0" step="1000" placeholder="45000" data-field="annualSalary" class="salary-input" />
                    <span class="per-year">per year</span>
                  </div>
                </label>

                <div class="tax-options">
                  <label class="toggle-option">
                    <input type="checkbox" data-field="studentLoan" />
                    <span>Student Loan (Plan 2)</span>
                  </label>
                  <label class="toggle-option">
                    <input type="checkbox" data-field="pensionContrib" />
                    <span>Pension (5%)</span>
                  </label>
                </div>
              </div>

              <div class="salary-breakdown" data-salary-breakdown>
                <div class="breakdown-header">
                  <h3>Your Monthly Breakdown</h3>
                  <p class="muted">Based on 2024/25 UK tax rates</p>
                </div>

                <div class="breakdown-visual">
                  <div class="salary-ring" data-salary-ring>
                    <svg viewBox="0 0 200 200" class="ring-svg">
                      <circle cx="100" cy="100" r="80" class="ring-bg"/>
                      <circle cx="100" cy="100" r="80" class="ring-tax" data-ring-tax/>
                      <circle cx="100" cy="100" r="80" class="ring-ni" data-ring-ni/>
                      <circle cx="100" cy="100" r="80" class="ring-take-home" data-ring-takehome/>
                    </svg>
                    <div class="ring-center">
                      <p class="ring-label">Take Home</p>
                      <p class="ring-value" data-monthly-takehome>£0</p>
                      <p class="ring-subtext">per month</p>
                    </div>
                  </div>

                  <div class="breakdown-details">
                    <div class="breakdown-row gross">
                      <span class="breakdown-label">Gross Monthly</span>
                      <span class="breakdown-value" data-monthly-gross>£0</span>
                    </div>
                    <div class="breakdown-row deduction">
                      <span class="breakdown-label">
                        <span class="color-dot tax"></span>
                        Income Tax
                      </span>
                      <span class="breakdown-value" data-monthly-tax>-£0</span>
                    </div>
                    <div class="breakdown-row deduction">
                      <span class="breakdown-label">
                        <span class="color-dot ni"></span>
                        National Insurance
                      </span>
                      <span class="breakdown-value" data-monthly-ni>-£0</span>
                    </div>
                    <div class="breakdown-row deduction" data-student-loan-row style="display:none;">
                      <span class="breakdown-label">
                        <span class="color-dot student"></span>
                        Student Loan
                      </span>
                      <span class="breakdown-value" data-monthly-student>-£0</span>
                    </div>
                    <div class="breakdown-row deduction" data-pension-row style="display:none;">
                      <span class="breakdown-label">
                        <span class="color-dot pension"></span>
                        Pension (5%)
                      </span>
                      <span class="breakdown-value" data-monthly-pension>-£0</span>
                    </div>
                    <div class="breakdown-row takehome">
                      <span class="breakdown-label">
                        <span class="color-dot takehome"></span>
                        Net Take-Home
                      </span>
                      <span class="breakdown-value" data-monthly-net>£0</span>
                    </div>
                  </div>
                </div>

                <div class="tax-band-indicator" data-tax-band>
                  <span class="band-label">Tax Band:</span>
                  <span class="band-value" data-band-name>Basic Rate (20%)</span>
                </div>
              </div>
            </div>

            <div class="screen-actions">
              <button class="btn ghost" type="button" data-back>Back</button>
              <button class="btn primary" type="button" data-next>
                Continue to Budget
              </button>
            </div>
          </div>
        </section>

        <section class="screen" data-screen="budget">
          <div class="screen-card budget-card">
            <div class="screen-header">
              <span class="step-badge">Step 3 of 4</span>
              <h2>Where does your money go?</h2>
              <p class="muted">
                Break down your monthly expenses. We'll show you what's left for savings and goals.
              </p>
            </div>

            <div class="budget-summary-bar">
              <div class="budget-income">
                <span class="budget-label">Monthly Income</span>
                <span class="budget-value" data-budget-income>£0</span>
              </div>
              <div class="budget-remaining" data-remaining-indicator>
                <span class="budget-label">Remaining</span>
                <span class="budget-value" data-budget-remaining>£0</span>
              </div>
            </div>

            <div class="expense-categories">
              <div class="expense-category housing">
                <div class="category-header">
                  <div class="category-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
                      <polyline points="9 22 9 12 15 12 15 22"/>
                    </svg>
                  </div>
                  <div class="category-info">
                    <h4>Housing</h4>
                    <p class="category-total" data-category-total="housing">£0</p>
                  </div>
                  <button class="category-toggle" type="button" data-toggle-category="housing">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="6 9 12 15 18 9"/>
                    </svg>
                  </button>
                </div>
                <div class="category-items" data-category-items="housing">
                  <label class="expense-item">
                    <span>Mortgage / Rent</span>
                    <input type="number" min="0" placeholder="1200" data-expense="mortgage" />
                  </label>
                  <label class="expense-item">
                    <span>Council Tax</span>
                    <input type="number" min="0" placeholder="150" data-expense="councilTax" />
                  </label>
                  <label class="expense-item">
                    <span>Home Insurance</span>
                    <input type="number" min="0" placeholder="40" data-expense="homeInsurance" />
                  </label>
                </div>
              </div>

              <div class="expense-category utilities">
                <div class="category-header">
                  <div class="category-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
                    </svg>
                  </div>
                  <div class="category-info">
                    <h4>Utilities & Bills</h4>
                    <p class="category-total" data-category-total="utilities">£0</p>
                  </div>
                  <button class="category-toggle" type="button" data-toggle-category="utilities">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="6 9 12 15 18 9"/>
                    </svg>
                  </button>
                </div>
                <div class="category-items" data-category-items="utilities">
                  <label class="expense-item">
                    <span>Gas & Electric</span>
                    <input type="number" min="0" placeholder="150" data-expense="energy" />
                  </label>
                  <label class="expense-item">
                    <span>Water</span>
                    <input type="number" min="0" placeholder="40" data-expense="water" />
                  </label>
                  <label class="expense-item">
                    <span>Internet & Phone</span>
                    <input type="number" min="0" placeholder="60" data-expense="internet" />
                  </label>
                  <label class="expense-item">
                    <span>TV & Streaming</span>
                    <input type="number" min="0" placeholder="30" data-expense="streaming" />
                  </label>
                </div>
              </div>

              <div class="expense-category transport">
                <div class="category-header">
                  <div class="category-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="1" y="3" width="15" height="13" rx="2"/>
                      <circle cx="6" cy="16" r="2"/><circle cx="12" cy="16" r="2"/>
                      <path d="M16 8h4l3 5v5h-3M1 12h15"/>
                    </svg>
                  </div>
                  <div class="category-info">
                    <h4>Transport</h4>
                    <p class="category-total" data-category-total="transport">£0</p>
                  </div>
                  <button class="category-toggle" type="button" data-toggle-category="transport">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="6 9 12 15 18 9"/>
                    </svg>
                  </button>
                </div>
                <div class="category-items" data-category-items="transport">
                  <label class="expense-item">
                    <span>Car Payment / Lease</span>
                    <input type="number" min="0" placeholder="250" data-expense="carPayment" />
                  </label>
                  <label class="expense-item">
                    <span>Car Insurance</span>
                    <input type="number" min="0" placeholder="80" data-expense="carInsurance" />
                  </label>
                  <label class="expense-item">
                    <span>Fuel / Charging</span>
                    <input type="number" min="0" placeholder="150" data-expense="fuel" />
                  </label>
                  <label class="expense-item">
                    <span>Public Transport</span>
                    <input type="number" min="0" placeholder="100" data-expense="publicTransport" />
                  </label>
                </div>
              </div>

              <div class="expense-category food">
                <div class="category-header">
                  <div class="category-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M18 8h1a4 4 0 010 8h-1M2 8h16v9a4 4 0 01-4 4H6a4 4 0 01-4-4V8z"/>
                      <line x1="6" y1="1" x2="6" y2="4"/><line x1="10" y1="1" x2="10" y2="4"/><line x1="14" y1="1" x2="14" y2="4"/>
                    </svg>
                  </div>
                  <div class="category-info">
                    <h4>Food & Groceries</h4>
                    <p class="category-total" data-category-total="food">£0</p>
                  </div>
                  <button class="category-toggle" type="button" data-toggle-category="food">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="6 9 12 15 18 9"/>
                    </svg>
                  </button>
                </div>
                <div class="category-items" data-category-items="food">
                  <label class="expense-item">
                    <span>Groceries</span>
                    <input type="number" min="0" placeholder="400" data-expense="groceries" />
                  </label>
                  <label class="expense-item">
                    <span>Dining Out</span>
                    <input type="number" min="0" placeholder="100" data-expense="diningOut" />
                  </label>
                  <label class="expense-item">
                    <span>Coffee & Snacks</span>
                    <input type="number" min="0" placeholder="50" data-expense="coffeeSnacks" />
                  </label>
                </div>
              </div>

              <div class="expense-category family">
                <div class="category-header">
                  <div class="category-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
                      <circle cx="9" cy="7" r="4"/>
                      <path d="M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75"/>
                    </svg>
                  </div>
                  <div class="category-info">
                    <h4>Family & Children</h4>
                    <p class="category-total" data-category-total="family">£0</p>
                  </div>
                  <button class="category-toggle" type="button" data-toggle-category="family">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="6 9 12 15 18 9"/>
                    </svg>
                  </button>
                </div>
                <div class="category-items" data-category-items="family">
                  <label class="expense-item">
                    <span>Childcare / Nursery</span>
                    <input type="number" min="0" placeholder="800" data-expense="childcare" />
                  </label>
                  <label class="expense-item">
                    <span>Kids Activities & Clubs</span>
                    <input type="number" min="0" placeholder="150" data-expense="kidsActivities" />
                  </label>
                  <label class="expense-item">
                    <span>School Costs</span>
                    <input type="number" min="0" placeholder="50" data-expense="schoolCosts" />
                  </label>
                  <label class="expense-item">
                    <span>Kids Clothing</span>
                    <input type="number" min="0" placeholder="40" data-expense="kidsClothing" />
                  </label>
                </div>
              </div>

              <div class="expense-category personal">
                <div class="category-header">
                  <div class="category-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <path d="M8 14s1.5 2 4 2 4-2 4-2M9 9h.01M15 9h.01"/>
                    </svg>
                  </div>
                  <div class="category-info">
                    <h4>Personal & Lifestyle</h4>
                    <p class="category-total" data-category-total="personal">£0</p>
                  </div>
                  <button class="category-toggle" type="button" data-toggle-category="personal">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="6 9 12 15 18 9"/>
                    </svg>
                  </button>
                </div>
                <div class="category-items" data-category-items="personal">
                  <label class="expense-item">
                    <span>Gym & Fitness</span>
                    <input type="number" min="0" placeholder="40" data-expense="gym" />
                  </label>
                  <label class="expense-item">
                    <span>Clothing</span>
                    <input type="number" min="0" placeholder="75" data-expense="clothing" />
                  </label>
                  <label class="expense-item">
                    <span>Personal Care</span>
                    <input type="number" min="0" placeholder="50" data-expense="personalCare" />
                  </label>
                  <label class="expense-item">
                    <span>Entertainment</span>
                    <input type="number" min="0" placeholder="100" data-expense="entertainment" />
                  </label>
                  <label class="expense-item">
                    <span>Subscriptions</span>
                    <input type="number" min="0" placeholder="30" data-expense="subscriptions" />
                  </label>
                </div>
              </div>

              <div class="expense-category debt">
                <div class="category-header">
                  <div class="category-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="2" y="5" width="20" height="14" rx="2"/>
                      <line x1="2" y1="10" x2="22" y2="10"/>
                    </svg>
                  </div>
                  <div class="category-info">
                    <h4>Debt Repayments</h4>
                    <p class="category-total" data-category-total="debt">£0</p>
                  </div>
                  <button class="category-toggle" type="button" data-toggle-category="debt">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="6 9 12 15 18 9"/>
                    </svg>
                  </button>
                </div>
                <div class="category-items" data-category-items="debt">
                  <label class="expense-item">
                    <span>Credit Cards</span>
                    <input type="number" min="0" placeholder="100" data-expense="creditCards" />
                  </label>
                  <label class="expense-item">
                    <span>Personal Loans</span>
                    <input type="number" min="0" placeholder="150" data-expense="personalLoans" />
                  </label>
                  <label class="expense-item">
                    <span>Other Debt</span>
                    <input type="number" min="0" placeholder="0" data-expense="otherDebt" />
                  </label>
                </div>
              </div>

              <div class="expense-category savings">
                <div class="category-header">
                  <div class="category-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2V5z"/>
                      <path d="M2 9v1c0 1.1.9 2 2 2h1"/>
                    </svg>
                  </div>
                  <div class="category-info">
                    <h4>Current Savings</h4>
                    <p class="category-total" data-category-total="savings">£0</p>
                  </div>
                  <button class="category-toggle" type="button" data-toggle-category="savings">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="6 9 12 15 18 9"/>
                    </svg>
                  </button>
                </div>
                <div class="category-items" data-category-items="savings">
                  <label class="expense-item">
                    <span>Emergency Fund (current balance)</span>
                    <input type="number" min="0" placeholder="5000" data-field="savings" />
                  </label>
                </div>
              </div>
            </div>

            <div class="budget-visualization">
              <h4>Your Money Flow</h4>
              <div class="flow-chart" data-flow-chart>
                <div class="flow-bar income-bar">
                  <span class="flow-label">Income</span>
                  <div class="flow-fill" data-flow-income></div>
                  <span class="flow-amount" data-flow-income-amount>£0</span>
                </div>
                <div class="flow-bar expenses-bar">
                  <span class="flow-label">Expenses</span>
                  <div class="flow-fill" data-flow-expenses></div>
                  <span class="flow-amount" data-flow-expenses-amount>£0</span>
                </div>
                <div class="flow-bar surplus-bar">
                  <span class="flow-label">Available</span>
                  <div class="flow-fill" data-flow-surplus></div>
                  <span class="flow-amount" data-flow-surplus-amount>£0</span>
                </div>
              </div>
            </div>

            <div class="screen-actions">
              <button class="btn ghost" type="button" data-back>Back</button>
              <button class="btn primary" type="button" data-next>
                Set Your Goals
              </button>
            </div>
          </div>
        </section>

        <section class="screen" data-screen="goals">
          <div class="screen-card goals-card">
            <div class="screen-header">
              <span class="step-badge">Step 4 of 4</span>
              <h2>What are you saving for?</h2>
              <p class="muted">
                Select your financial goals and set target amounts. We'll create a personalised plan to help you achieve them.
              </p>
            </div>

            <div class="surplus-banner" data-surplus-banner>
              <div class="surplus-icon">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/>
                </svg>
              </div>
              <div class="surplus-info">
                <p class="surplus-label">Available to save each month</p>
                <p class="surplus-amount" data-goals-surplus>£0</p>
              </div>
            </div>

            <div class="goal-grid">
              <label class="goal-card" data-goal-card>
                <input type="checkbox" data-goal-check value="Emergency buffer" />
                <div class="goal-icon emergency">
                  <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    <path d="M12 8v4M12 16h.01"/>
                  </svg>
                </div>
                <div class="goal-content">
                  <span class="goal-name">Emergency Fund</span>
                  <span class="goal-desc">3-6 months of expenses for unexpected costs</span>
                </div>
                <div class="goal-target-wrap">
                  <span class="goal-target-label">Target</span>
                  <div class="goal-input-wrap">
                    <span>£</span>
                    <input type="number" min="0" placeholder="9000" data-goal-target />
                  </div>
                </div>
              </label>

              <label class="goal-card" data-goal-card>
                <input type="checkbox" data-goal-check value="Home deposit" />
                <div class="goal-icon home">
                  <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
                    <path d="M9 22V12h6v10"/>
                  </svg>
                </div>
                <div class="goal-content">
                  <span class="goal-name">Home Deposit</span>
                  <span class="goal-desc">Save towards your dream home</span>
                </div>
                <div class="goal-target-wrap">
                  <span class="goal-target-label">Target</span>
                  <div class="goal-input-wrap">
                    <span>£</span>
                    <input type="number" min="0" placeholder="25000" data-goal-target />
                  </div>
                </div>
              </label>

              <label class="goal-card" data-goal-card>
                <input type="checkbox" data-goal-check value="Family holiday" />
                <div class="goal-icon holiday">
                  <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"/>
                  </svg>
                </div>
                <div class="goal-content">
                  <span class="goal-name">Family Holiday</span>
                  <span class="goal-desc">Create lasting memories together</span>
                </div>
                <div class="goal-target-wrap">
                  <span class="goal-target-label">Target</span>
                  <div class="goal-input-wrap">
                    <span>£</span>
                    <input type="number" min="0" placeholder="4000" data-goal-target />
                  </div>
                </div>
              </label>

              <label class="goal-card" data-goal-card>
                <input type="checkbox" data-goal-check value="Education" />
                <div class="goal-icon education">
                  <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 10v6M2 10l10-5 10 5-10 5z"/>
                    <path d="M6 12v5c0 2 2 3 6 3s6-1 6-3v-5"/>
                  </svg>
                </div>
                <div class="goal-content">
                  <span class="goal-name">Education Fund</span>
                  <span class="goal-desc">Invest in your future or your children's</span>
                </div>
                <div class="goal-target-wrap">
                  <span class="goal-target-label">Target</span>
                  <div class="goal-input-wrap">
                    <span>£</span>
                    <input type="number" min="0" placeholder="10000" data-goal-target />
                  </div>
                </div>
              </label>

              <label class="goal-card" data-goal-card>
                <input type="checkbox" data-goal-check value="New car" />
                <div class="goal-icon car">
                  <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 16H9m10 0h3v-3.15a1 1 0 00-.84-.99L16 11l-2.7-3.6a1 1 0 00-.8-.4H5.24a2 2 0 00-1.8 1.1l-.8 1.63A6 6 0 002 12.42V16h2"/>
                    <circle cx="6.5" cy="16.5" r="2.5"/><circle cx="16.5" cy="16.5" r="2.5"/>
                  </svg>
                </div>
                <div class="goal-content">
                  <span class="goal-name">New Car</span>
                  <span class="goal-desc">Save for your next vehicle</span>
                </div>
                <div class="goal-target-wrap">
                  <span class="goal-target-label">Target</span>
                  <div class="goal-input-wrap">
                    <span>£</span>
                    <input type="number" min="0" placeholder="15000" data-goal-target />
                  </div>
                </div>
              </label>

              <label class="goal-card" data-goal-card>
                <input type="checkbox" data-goal-check value="Retirement" />
                <div class="goal-icon retirement">
                  <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M12 6v6l4 2"/>
                  </svg>
                </div>
                <div class="goal-content">
                  <span class="goal-name">Retirement</span>
                  <span class="goal-desc">Build your long-term wealth</span>
                </div>
                <div class="goal-target-wrap">
                  <span class="goal-target-label">Target</span>
                  <div class="goal-input-wrap">
                    <span>£</span>
                    <input type="number" min="0" placeholder="100000" data-goal-target />
                  </div>
                </div>
              </label>

              <label class="goal-card" data-goal-card>
                <input type="checkbox" data-goal-check value="Wedding" />
                <div class="goal-icon wedding">
                  <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/>
                  </svg>
                </div>
                <div class="goal-content">
                  <span class="goal-name">Wedding</span>
                  <span class="goal-desc">Plan your perfect day</span>
                </div>
                <div class="goal-target-wrap">
                  <span class="goal-target-label">Target</span>
                  <div class="goal-input-wrap">
                    <span>£</span>
                    <input type="number" min="0" placeholder="20000" data-goal-target />
                  </div>
                </div>
              </label>

              <label class="goal-card" data-goal-card>
                <input type="checkbox" data-goal-check value="Home improvements" />
                <div class="goal-icon improvements">
                  <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"/>
                  </svg>
                </div>
                <div class="goal-content">
                  <span class="goal-name">Home Improvements</span>
                  <span class="goal-desc">Upgrade your living space</span>
                </div>
                <div class="goal-target-wrap">
                  <span class="goal-target-label">Target</span>
                  <div class="goal-input-wrap">
                    <span>£</span>
                    <input type="number" min="0" placeholder="8000" data-goal-target />
                  </div>
                </div>
              </label>
            </div>

            <div class="screen-actions">
              <button class="btn ghost" type="button" data-back>Back</button>
              <button class="btn primary" type="button" data-next>
                Generate My Plan
              </button>
            </div>
          </div>
        </section>

        <section class="screen" data-screen="plan">
          <div class="screen-card plan-summary-card">
            <div class="plan-header">
              <div class="plan-checkmark">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
                  <polyline points="22 4 12 14.01 9 11.01"/>
                </svg>
              </div>
              <h2>Your plan is ready, <span data-summary-name>Friend</span>!</h2>
              <p class="muted">
                Based on your income, expenses, and goals, here's your personalised financial roadmap.
              </p>
            </div>

            <div class="plan-grid">
              <div class="plan-card highlight">
                <p class="card-title">Monthly Surplus</p>
                <p class="card-value" data-summary-surplus>£0</p>
                <p class="muted">Available for goals after expenses</p>
              </div>
              <div class="plan-card">
                <p class="card-title">Buffer Status</p>
                <p class="card-value" data-summary-buffer>0 months</p>
                <p class="muted">Emergency fund coverage</p>
              </div>
              <div class="plan-card">
                <p class="card-title">Goals Active</p>
                <p class="card-value" data-summary-goals>0 goals</p>
                <p class="muted" data-summary-next>Add goals to start tracking</p>
              </div>
            </div>

            <div class="plan-actions">
              <div class="action-preview">
                <h3>Your Next Steps</h3>
                <ul class="action-list" data-summary-actions>
                  <li>Set up automatic transfers to your goals</li>
                  <li>Review your emergency fund target</li>
                  <li>Explore investment options for long-term goals</li>
                </ul>
              </div>
              <button class="btn primary large" type="button" data-go="app">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="18" height="18" rx="2"/><path d="M9 3v18M21 9H3M21 15H3"/>
                </svg>
                Enter Dashboard
              </button>
            </div>
            <div class="screen-actions">
              <button class="btn ghost" type="button" data-back>Back</button>
            </div>
          </div>
        </section>

        <section class="screen" data-screen="app">
          <div class="app-shell">
            <header class="app-header">
              <div>
                <p class="app-greeting">
                  Welcome back, <span data-user-name>Friend</span>
                </p>
                <p class="muted">Your financial command center</p>
              </div>
              <div class="status-pill">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                </svg>
                Score <span data-app-confidence>80</span>
              </div>
            </header>

            <nav class="app-tabs" aria-label="Primary">
              <button class="nav-item is-active" type="button" data-tab-target="home">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
                </svg>
                Home
              </button>
              <button class="nav-item" type="button" data-tab-target="plan">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                </svg>
                Plan
              </button>
              <button class="nav-item" type="button" data-tab-target="goals">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/>
                </svg>
                Goals
              </button>
              <button class="nav-item" type="button" data-tab-target="rewards">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/>
                </svg>
                Rewards
              </button>
              <button class="nav-item" type="button" data-tab-target="family">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
                  <circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75"/>
                </svg>
                Family
              </button>
              <button class="nav-item" type="button" data-tab-target="learn">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M2 3h6a4 4 0 014 4v14a3 3 0 00-3-3H2z"/><path d="M22 3h-6a4 4 0 00-4 4v14a3 3 0 013-3h7z"/>
                </svg>
                Learn
              </button>
              <button class="nav-item" type="button" data-tab-target="import">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/>
                </svg>
                Import
              </button>
              <button class="nav-item" type="button" data-tab-target="profile">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/>
                </svg>
                Profile
              </button>
            </nav>

            <div class="tab-panel is-active" data-tab="home">
              <div class="panel-grid">
                <div class="panel-card metric-card">
                  <div class="metric-icon surplus-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/>
                    </svg>
                  </div>
                  <p class="card-title">Monthly Surplus</p>
                  <p class="card-value" data-app-surplus>£0</p>
                  <p class="muted">Auto-allocated to goals</p>
                </div>
                <div class="panel-card metric-card">
                  <div class="metric-icon buffer-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    </svg>
                  </div>
                  <p class="card-title">Buffer Health</p>
                  <p class="card-value" data-app-buffer>0 months</p>
                  <p class="muted">Target: 3-6 months</p>
                </div>
                <div class="panel-card metric-card">
                  <div class="metric-icon score-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                    </svg>
                  </div>
                  <p class="card-title">Financial Score</p>
                  <p class="card-value">
                    <span data-confidence-total>80</span> / 100
                  </p>
                  <div class="confidence-breakdown">
                    <div class="confidence-row">
                      <span>Base</span>
                      <span data-confidence-base>50</span>
                    </div>
                    <div class="confidence-row">
                      <span>Buffer</span>
                      <span data-confidence-buffer>+0</span>
                    </div>
                    <div class="confidence-row">
                      <span>Goals</span>
                      <span data-confidence-goals>+0</span>
                    </div>
                    <div class="confidence-row">
                      <span>Cashflow</span>
                      <span data-confidence-cashflow>+0</span>
                    </div>
                    <div class="confidence-row">
                      <span>Debt</span>
                      <span data-confidence-debt>0</span>
                    </div>
                  </div>
                </div>
                <div class="panel-card metric-card">
                  <div class="metric-icon rewards-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/>
                    </svg>
                  </div>
                  <p class="card-title">Rewards</p>
                  <p class="card-value">
                    <span data-rewards-points>620</span> pts
                  </p>
                  <p class="muted">Keep saving to earn more!</p>
                </div>
              </div>

              <!-- Money Mood Tracker -->
              <div class="panel-card wide mood-tracker-card">
                <div class="mood-header">
                  <div class="mood-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/>
                    </svg>
                  </div>
                  <div>
                    <h3>How's your money mood today?</h3>
                    <p class="muted">Track your financial confidence over time</p>
                  </div>
                </div>
                <div class="mood-selector" data-mood-selector>
                  <button type="button" class="mood-btn" data-mood="1" title="Very Stressed">
                    <span class="mood-emoji">😰</span>
                    <span class="mood-label">Stressed</span>
                  </button>
                  <button type="button" class="mood-btn" data-mood="2" title="Worried">
                    <span class="mood-emoji">😟</span>
                    <span class="mood-label">Worried</span>
                  </button>
                  <button type="button" class="mood-btn" data-mood="3" title="Neutral">
                    <span class="mood-emoji">😐</span>
                    <span class="mood-label">Neutral</span>
                  </button>
                  <button type="button" class="mood-btn" data-mood="4" title="Confident">
                    <span class="mood-emoji">🙂</span>
                    <span class="mood-label">Good</span>
                  </button>
                  <button type="button" class="mood-btn" data-mood="5" title="Excited">
                    <span class="mood-emoji">😄</span>
                    <span class="mood-label">Great!</span>
                  </button>
                </div>
                <div class="mood-history" data-mood-history>
                  <h4>Your Mood Trend</h4>
                  <div class="mood-chart" data-mood-chart></div>
                  <p class="mood-insight muted" data-mood-insight>Log your mood to see trends</p>
                </div>
              </div>

              <div class="panel-row">
                <div class="panel-card dashboard-builder">
                  <h3>Dashboard Builder</h3>
                  <p class="muted">Customise your view</p>
                  <div class="toggle-grid">
                    <label class="toggle-pill">
                      <input type="checkbox" data-dashboard-toggle value="cashflow" checked />
                      <span>Cash Flow</span>
                    </label>
                    <label class="toggle-pill">
                      <input type="checkbox" data-dashboard-toggle value="alerts" checked />
                      <span>Alerts</span>
                    </label>
                    <label class="toggle-pill">
                      <input type="checkbox" data-dashboard-toggle value="vulnerabilities" checked />
                      <span>Risk Radar</span>
                    </label>
                    <label class="toggle-pill">
                      <input type="checkbox" data-dashboard-toggle value="quickwins" checked />
                      <span>Quick Wins</span>
                    </label>
                    <label class="toggle-pill">
                      <input type="checkbox" data-dashboard-toggle value="spark" checked />
                      <span>Daily Tip</span>
                    </label>
                  </div>
                </div>
                <div class="panel-card">
                  <h3>Income vs Expenses</h3>
                  <div class="bar-compare">
                    <div class="bar-track">
                      <span>Income</span>
                      <div class="bar-fill income" data-income-bar>
                        <span data-income-label>£0</span>
                      </div>
                    </div>
                    <div class="bar-track">
                      <span>Expenses</span>
                      <div class="bar-fill expense" data-expense-bar>
                        <span data-expense-label>£0</span>
                      </div>
                    </div>
                    <div class="bar-track">
                      <span>Savings</span>
                      <div class="bar-fill saving" data-saving-bar>
                        <span data-saving-label>£0</span>
                      </div>
                    </div>
                  </div>
                  <p class="muted" data-income-summary>
                    Balance your income and expenses for financial health.
                  </p>
                </div>
              </div>

              <div class="panel-card wide smart-insights-card" data-widget="insights">
                <div class="insights-header">
                  <div class="insights-icon">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <path d="M12 16v-4M12 8h.01"/>
                    </svg>
                  </div>
                  <div>
                    <h3>Smart Money Insights</h3>
                    <p class="muted">Personalized analysis based on your finances</p>
                  </div>
                </div>

                <div class="insights-concerns" data-insights-concerns>
                  <h4>
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/>
                      <line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/>
                    </svg>
                    Areas of Concern
                  </h4>
                  <div class="concerns-list" data-concerns-list></div>
                </div>

                <div class="insights-actions" data-insights-actions>
                  <h4>
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
                    </svg>
                    Recommended Actions
                  </h4>
                  <div class="actions-list" data-actions-list></div>
                </div>

                <div class="insights-expert" data-insights-expert>
                  <h4>
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                    </svg>
                    Expert Wisdom
                  </h4>
                  <div class="expert-advice" data-expert-advice></div>
                </div>
              </div>

              <div class="dashboard-grid" data-dashboard-grid>
                <div class="panel-card wide" data-widget="cashflow">
                  <div class="panel-head">
                    <div>
                      <h3>Cash Flow Forecast</h3>
                      <p class="muted">
                        Track your projected balance over time
                      </p>
                    </div>
                    <div class="scenario-controls">
                      <label>
                        Scenario
                        <select data-scenario-select>
                          <option value="baseline" selected>Baseline</option>
                          <option value="optimistic">Optimistic</option>
                          <option value="conservative">Conservative</option>
                          <option value="stress">Stress Test</option>
                          <option value="custom">Custom</option>
                        </select>
                      </label>
                      <label>
                        Months
                        <input type="number" min="6" max="36" value="12" data-cashflow-months />
                      </label>
                    </div>
                  </div>
                  <div class="scenario-custom" data-scenario-custom>
                    <label>
                      Income change (%)
                      <input type="number" step="0.5" value="0" data-scenario-income />
                    </label>
                    <label>
                      Expense change (%)
                      <input type="number" step="0.5" value="0" data-scenario-expense />
                    </label>
                  </div>
                  <div class="chart-wrap" data-cashflow-chart></div>
                  <div class="chart-legend">
                    <span class="legend-item">
                      <span class="legend-dot balance"></span>
                      Projected Balance
                    </span>
                    <span class="legend-item">
                      <span class="legend-dot net positive"></span>
                      Monthly Surplus
                    </span>
                    <span class="legend-item">
                      <span class="legend-dot net negative"></span>
                      Monthly Deficit
                    </span>
                  </div>
                  <div class="chart-metrics">
                    <div class="chart-metric">
                      <p class="metric-label">Avg Monthly</p>
                      <p class="metric-value" data-cashflow-average>£0</p>
                    </div>
                    <div class="chart-metric">
                      <p class="metric-label">Lowest Point</p>
                      <p class="metric-value" data-cashflow-low>£0</p>
                    </div>
                    <div class="chart-metric">
                      <p class="metric-label">Risk Months</p>
                      <p class="metric-value" data-cashflow-risk>0</p>
                    </div>
                  </div>
                </div>

                <div class="panel-card" data-widget="alerts">
                  <h3>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 01-3.46 0"/>
                    </svg>
                    Upcoming Alerts
                  </h3>
                  <ul class="alert-list" data-alert-list></ul>
                </div>

                <div class="panel-card" data-widget="vulnerabilities">
                  <h3>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/>
                    </svg>
                    Risk Radar
                  </h3>
                  <ul class="vuln-list" data-vulnerability-list></ul>
                  <div class="vuln-score">
                    <p class="muted">Overall Risk Level</p>
                    <p class="card-value" data-vulnerability-score>Low</p>
                  </div>
                </div>

                <div class="panel-card" data-widget="quickwins">
                  <h3>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
                    </svg>
                    Quick Wins
                  </h3>
                  <div class="quick-grid">
                    <button type="button" class="pill">Find lost balances</button>
                    <button type="button" class="pill">Review subscriptions</button>
                    <button type="button" class="pill">Auto-save surplus</button>
                    <button type="button" class="pill">Investment check</button>
                  </div>
                </div>

                <div class="panel-card" data-widget="spark">
                  <h3>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                    </svg>
                    Daily Money Tip
                  </h3>
                  <p class="spark-quote">
                    "Small upgrades beat big delays. Increase your auto-save by 1% today."
                  </p>
                  <p class="muted">Personalized to your goals</p>
                </div>
              </div>
            </div>

            <div class="tab-panel" data-tab="plan">
              <div class="panel-grid">
                <div class="panel-card">
                  <h3>Future Lab</h3>
                  <p class="muted">
                    AI-powered scenario planning
                  </p>
                  <div class="chat-stack" data-future-chat>
                    <div class="chat-bubble">
                      <p class="chat-title">You</p>
                      <p data-future-user>Can we pause investing for 6 months?</p>
                    </div>
                    <div class="chat-bubble response">
                      <p class="chat-title">Consumer Pay</p>
                      <p data-future-response>
                        That delays your goal by 4 months, but keeps the buffer
                        intact. Want to see alternatives?
                      </p>
                    </div>
                  </div>
                  <div class="future-form" data-future-form>
                    <label>
                      Ask a question
                      <textarea rows="2" placeholder="e.g. What if I pause investing for 6 months?" data-future-question></textarea>
                    </label>
                    <div class="future-grid">
                      <label>
                        Scenario type
                        <select data-future-type>
                          <option value="pause_investing" selected>Pause contributions</option>
                          <option value="income_drop">Income drop</option>
                          <option value="income_boost">Income boost</option>
                          <option value="expense_spike">Expense spike</option>
                          <option value="one_off">One-off expense</option>
                        </select>
                      </label>
                      <label>
                        <span data-future-months-label>Duration (months)</span>
                        <input type="number" min="1" max="24" value="6" data-future-months />
                      </label>
                      <label>
                        <span data-future-amount-label>Amount (£)</span>
                        <input type="number" min="0" step="50" value="250" data-future-amount />
                      </label>
                    </div>
                    <button class="btn secondary" type="button" data-future-run>
                      Run Scenario
                    </button>
                  </div>
                  <div class="future-output">
                    <p class="card-title">Scenario Impact</p>
                    <p class="muted" data-future-summary>
                      Update the fields to simulate your scenario.
                    </p>
                    <div class="chart-metrics future-metrics">
                      <div>
                        <p class="metric-label">Balance Impact</p>
                        <p class="metric-value" data-future-balance>£0</p>
                      </div>
                      <div>
                        <p class="metric-label">Risk Months</p>
                        <p class="metric-value" data-future-risk>0</p>
                      </div>
                      <div>
                        <p class="metric-label">Goal Timing</p>
                        <p class="metric-value" data-future-delay>--</p>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="panel-card monte-panel">
                  <h3>Monte Carlo Simulator</h3>
                  <p class="muted">Run thousands of scenarios to see your probability of success</p>
                  <form class="monte-form monte-grid" data-monte-form>
                    <label>
                      Starting balance
                      <input type="number" min="0" step="100" value="2500" data-monte-start />
                    </label>
                    <label>
                      Monthly contribution
                      <input type="number" min="1" value="350" data-monte-monthly />
                    </label>
                    <label>
                      Contribution growth (%/yr)
                      <input type="number" step="0.1" value="2" data-monte-growth />
                    </label>
                    <label>
                      Years
                      <input type="number" min="1" max="40" value="20" data-monte-years />
                    </label>
                    <label>
                      Risk profile
                      <select data-monte-risk>
                        <option value="cautious">Cautious</option>
                        <option value="balanced" selected>Balanced</option>
                        <option value="growth">Growth</option>
                        <option value="custom">Custom</option>
                      </select>
                    </label>
                    <label>
                      Expected return (%)
                      <input type="number" step="0.1" value="6" data-monte-return />
                    </label>
                    <label>
                      Volatility (%)
                      <input type="number" step="0.1" value="10" data-monte-vol />
                    </label>
                    <label>
                      Inflation (%)
                      <input type="number" step="0.1" value="2.5" data-monte-inflation />
                    </label>
                    <label>
                      Annual fee (%)
                      <input type="number" step="0.1" value="0.6" data-monte-fee />
                    </label>
                    <label>
                      Target value
                      <input type="number" min="0" step="100" value="100000" data-monte-target />
                    </label>
                    <label>
                      Simulations
                      <input type="number" min="100" max="5000" step="50" value="500" data-monte-runs />
                    </label>
                    <button class="btn primary full" type="button" data-monte-run>
                      Run Simulation
                    </button>
                  </form>
                  <div class="monte-results">
                    <div class="monte-output" data-monte-output>
                      Projected range: £0 - £0
                    </div>
                    <div class="monte-stats">
                      <div>
                        <p class="metric-label">Simulations</p>
                        <p class="metric-value" data-monte-sims>500</p>
                      </div>
                      <div>
                        <p class="metric-label">Hit Target</p>
                        <p class="metric-value" data-monte-hit>0%</p>
                      </div>
                      <div>
                        <p class="metric-label">Real Return</p>
                        <p class="metric-value" data-monte-real>0%</p>
                      </div>
                    </div>
                    <p class="muted" data-assumptions-updated>Assumptions updated: --</p>
                    <div class="monte-chart-wrap">
                      <h4>Distribution of Outcomes</h4>
                      <div class="monte-bars" data-monte-bars></div>
                      <div class="monte-percentiles">
                        <span class="percentile p10" data-monte-p10>10th: £0</span>
                        <span class="percentile p50" data-monte-p50>50th: £0</span>
                        <span class="percentile p90" data-monte-p90>90th: £0</span>
                      </div>
                    </div>
                    <div class="monte-report" data-monte-report style="display: none;">
                      <h4>Simulation Report</h4>
                      <div class="report-content" data-report-content></div>
                      <button class="btn ghost" type="button" data-download-report>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"/>
                        </svg>
                        Download Report
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="panel-row">
                <div class="panel-card converter-card">
                  <h3>Currency Converter</h3>
                  <label>
                    Amount
                    <input type="number" min="0" value="120" data-converter-amount />
                  </label>
                  <div class="converter-row">
                    <label>
                      From
                      <select data-converter-from>
                        <option value="GBP">GBP</option>
                        <option value="USD">USD</option>
                        <option value="EUR">EUR</option>
                        <option value="NGN">NGN</option>
                        <option value="GHS">GHS</option>
                        <option value="ZAR">ZAR</option>
                        <option value="KES">KES</option>
                        <option value="CAD">CAD</option>
                      </select>
                    </label>
                    <button class="swap" type="button" aria-label="Swap currencies" data-converter-swap>
                      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="17 1 21 5 17 9"/><path d="M3 11V9a4 4 0 014-4h14"/>
                        <polyline points="7 23 3 19 7 15"/><path d="M21 13v2a4 4 0 01-4 4H3"/>
                      </svg>
                    </button>
                    <label>
                      To
                      <select data-converter-to>
                        <option value="USD">USD</option>
                        <option value="GBP">GBP</option>
                        <option value="EUR">EUR</option>
                        <option value="NGN">NGN</option>
                        <option value="GHS">GHS</option>
                        <option value="ZAR">ZAR</option>
                        <option value="KES">KES</option>
                        <option value="CAD">CAD</option>
                      </select>
                    </label>
                  </div>
                  <div class="converter-output" data-converter-output></div>
                  <p class="muted" data-fx-updated>Rates updated: --</p>
                </div>
                <div class="panel-card">
                  <h3>Value Finder</h3>
                  <p>
                    We alert you to better value on big purchases and surface hidden fees.
                  </p>
                  <div class="pill-row">
                    <span>Lost balance scan</span>
                    <span>Income booster</span>
                    <span>Price alerts</span>
                  </div>
                </div>
              </div>

              <!-- Bill Calendar & Reminders -->
              <div class="panel-card bills-panel">
                <div class="bills-header">
                  <h3>Bill Calendar</h3>
                  <button class="btn small primary" type="button" data-add-bill>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
                    </svg>
                    Add Bill
                  </button>
                </div>
                <p class="muted">Track upcoming bills and never miss a payment</p>

                <!-- Monthly Summary -->
                <div class="bills-summary">
                  <div class="summary-card">
                    <span class="summary-label">Total Due</span>
                    <span class="summary-value" data-bills-total>£0</span>
                  </div>
                  <div class="summary-card">
                    <span class="summary-label">Paid</span>
                    <span class="summary-value positive" data-bills-paid>£0</span>
                  </div>
                  <div class="summary-card">
                    <span class="summary-label">Remaining</span>
                    <span class="summary-value warning" data-bills-remaining>£0</span>
                  </div>
                </div>

                <!-- Calendar View -->
                <div class="bills-calendar">
                  <div class="calendar-header">
                    <button class="btn ghost small" type="button" data-calendar-prev>
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="15 18 9 12 15 6"/>
                      </svg>
                    </button>
                    <h4 data-calendar-month>January 2026</h4>
                    <button class="btn ghost small" type="button" data-calendar-next>
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="9 18 15 12 9 6"/>
                      </svg>
                    </button>
                  </div>
                  <div class="calendar-grid" data-calendar-grid>
                    <!-- Calendar days populated by JS -->
                  </div>
                </div>

                <!-- Upcoming Bills List -->
                <div class="bills-upcoming">
                  <h4>Upcoming This Week</h4>
                  <div class="bills-list" data-bills-upcoming>
                    <p class="muted">No bills added yet. Add your first bill to get started.</p>
                  </div>
                </div>

                <!-- All Bills List -->
                <div class="bills-all">
                  <h4>All Bills</h4>
                  <div class="bills-list" data-bills-all>
                    <p class="muted">No bills added yet.</p>
                  </div>
                </div>
              </div>

              <!-- Add/Edit Bill Modal -->
              <div class="modal-overlay" data-bill-modal hidden>
                <div class="modal-content">
                  <div class="modal-header">
                    <h3 data-bill-modal-title>Add New Bill</h3>
                    <button class="btn ghost" type="button" data-close-bill-modal>×</button>
                  </div>
                  <form class="bill-form" data-bill-form>
                    <input type="hidden" data-bill-id />
                    <label>
                      Bill Name
                      <input type="text" placeholder="e.g. Netflix, Council Tax" data-bill-name required />
                    </label>
                    <label>
                      Amount (£)
                      <input type="number" min="0" step="0.01" placeholder="0.00" data-bill-amount required />
                    </label>
                    <label>
                      Category
                      <select data-bill-category>
                        <option value="utilities">Utilities</option>
                        <option value="subscriptions">Subscriptions</option>
                        <option value="insurance">Insurance</option>
                        <option value="loans">Loans & Credit</option>
                        <option value="housing">Housing</option>
                        <option value="transport">Transport</option>
                        <option value="other">Other</option>
                      </select>
                    </label>
                    <label>
                      Due Day of Month
                      <input type="number" min="1" max="31" placeholder="1-31" data-bill-due-day required />
                    </label>
                    <label>
                      Frequency
                      <select data-bill-frequency>
                        <option value="monthly">Monthly</option>
                        <option value="weekly">Weekly</option>
                        <option value="quarterly">Quarterly</option>
                        <option value="annually">Annually</option>
                      </select>
                    </label>
                    <div class="modal-actions">
                      <button type="button" class="btn ghost" data-close-bill-modal>Cancel</button>
                      <button type="submit" class="btn primary">Save Bill</button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Debt Payoff Planner -->
              <div class="panel-card debt-panel">
                <div class="debt-header">
                  <h3>Debt Payoff Planner</h3>
                  <button class="btn small primary" type="button" data-add-debt>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
                    </svg>
                    Add Debt
                  </button>
                </div>
                <p class="muted">Create a strategy to become debt-free faster</p>

                <!-- Debt Summary -->
                <div class="debt-summary">
                  <div class="summary-card">
                    <span class="summary-label">Total Debt</span>
                    <span class="summary-value negative" data-debt-total>£0</span>
                  </div>
                  <div class="summary-card">
                    <span class="summary-label">Monthly Payments</span>
                    <span class="summary-value" data-debt-monthly>£0</span>
                  </div>
                  <div class="summary-card">
                    <span class="summary-label">Debt-Free Date</span>
                    <span class="summary-value positive" data-debt-free-date>--</span>
                  </div>
                </div>

                <!-- Strategy Toggle -->
                <div class="debt-strategy">
                  <h4>Payoff Strategy</h4>
                  <div class="strategy-toggle">
                    <button class="strategy-btn is-active" type="button" data-strategy="avalanche">
                      <strong>Avalanche</strong>
                      <span class="muted">Highest interest first</span>
                    </button>
                    <button class="strategy-btn" type="button" data-strategy="snowball">
                      <strong>Snowball</strong>
                      <span class="muted">Smallest balance first</span>
                    </button>
                  </div>
                </div>

                <!-- Extra Payment Calculator -->
                <div class="extra-payment">
                  <label>
                    Extra Monthly Payment (£)
                    <input type="number" min="0" step="10" value="0" data-extra-payment />
                  </label>
                  <div class="extra-impact" data-extra-impact>
                    <p class="muted">Add an extra payment to see how much faster you'll be debt-free</p>
                  </div>
                </div>

                <!-- Debt Payoff Timeline Chart -->
                <div class="debt-chart-container">
                  <h4>Payoff Timeline</h4>
                  <div class="debt-chart" data-debt-chart>
                    <p class="muted">Add debts to see your payoff timeline</p>
                  </div>
                </div>

                <!-- Debt List -->
                <div class="debt-list-container">
                  <h4>Your Debts</h4>
                  <div class="debt-list" data-debt-list>
                    <p class="muted">No debts added. Add your debts to create a payoff plan.</p>
                  </div>
                </div>

                <!-- Strategy Comparison -->
                <div class="strategy-comparison" data-strategy-comparison hidden>
                  <h4>Strategy Comparison</h4>
                  <div class="comparison-table">
                    <div class="comparison-row header">
                      <span></span>
                      <span>Avalanche</span>
                      <span>Snowball</span>
                    </div>
                    <div class="comparison-row">
                      <span>Total Interest</span>
                      <span data-avalanche-interest>£0</span>
                      <span data-snowball-interest>£0</span>
                    </div>
                    <div class="comparison-row">
                      <span>Payoff Time</span>
                      <span data-avalanche-time>0 months</span>
                      <span data-snowball-time>0 months</span>
                    </div>
                    <div class="comparison-row">
                      <span>You Save</span>
                      <span class="positive" data-avalanche-savings>£0</span>
                      <span data-snowball-savings>--</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Add/Edit Debt Modal -->
              <div class="modal-overlay" data-debt-modal hidden>
                <div class="modal-content">
                  <div class="modal-header">
                    <h3 data-debt-modal-title>Add New Debt</h3>
                    <button class="btn ghost" type="button" data-close-debt-modal>×</button>
                  </div>
                  <form class="debt-form" data-debt-form>
                    <input type="hidden" data-debt-id />
                    <label>
                      Debt Name
                      <input type="text" placeholder="e.g. Credit Card, Car Loan" data-debt-name required />
                    </label>
                    <label>
                      Current Balance (£)
                      <input type="number" min="0" step="0.01" placeholder="0.00" data-debt-balance required />
                    </label>
                    <label>
                      Interest Rate (% APR)
                      <input type="number" min="0" max="100" step="0.1" placeholder="0.0" data-debt-rate required />
                    </label>
                    <label>
                      Minimum Monthly Payment (£)
                      <input type="number" min="0" step="1" placeholder="0" data-debt-min-payment required />
                    </label>
                    <label>
                      Category
                      <select data-debt-category>
                        <option value="credit-card">Credit Card</option>
                        <option value="personal-loan">Personal Loan</option>
                        <option value="car-finance">Car Finance</option>
                        <option value="student-loan">Student Loan</option>
                        <option value="overdraft">Overdraft</option>
                        <option value="other">Other</option>
                      </select>
                    </label>
                    <div class="modal-actions">
                      <button type="button" class="btn ghost" data-close-debt-modal>Cancel</button>
                      <button type="submit" class="btn primary">Save Debt</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>

            <div class="tab-panel" data-tab="goals">
              <div class="panel-card">
                <h3>Your Active Goals</h3>
                <p class="muted">
                  Edit targets and track your progress towards financial freedom.
                </p>
                <div class="goal-list" data-app-goals></div>
              </div>
              <div class="panel-card motivation-card">
                <h3>Stay Motivated</h3>
                <p>
                  Set shared family milestones and celebrate your wins together.
                </p>
                <div class="progress">
                  <span style="width: 65%"></span>
                </div>
                <p class="muted">You're 65% closer to your first milestone!</p>
              </div>
            </div>

            <div class="tab-panel" data-tab="rewards">
              <div class="panel-grid">
                <div class="panel-card rewards-main">
                  <h3>Rewards Wallet</h3>
                  <p class="card-value">
                    <span data-rewards-points>620</span> points
                  </p>
                  <p class="muted">Earn points for hitting savings targets</p>
                  <div class="pill-row">
                    <span>Travel perks</span>
                    <span>Home savings</span>
                    <span>Wellness boosts</span>
                  </div>
                </div>
                <div class="panel-card">
                  <h3>Streak</h3>
                  <p class="card-value">
                    <span data-rewards-streak>12</span> days
                  </p>
                  <p class="muted">Keep your streak going for bonus points!</p>
                </div>
              </div>
            </div>

            <div class="tab-panel" data-tab="family">
              <div class="panel-grid">
                <div class="panel-card">
                  <h3>Shared Goals</h3>
                  <p>
                    Invite family members and work towards common goals together.
                  </p>
                  <div class="pill-row">
                    <span>Family trip</span>
                    <span>Education fund</span>
                    <span>Home upgrades</span>
                  </div>
                </div>
                <div class="panel-card">
                  <h3>Family Vault</h3>
                  <p>
                    Store and share important documents securely.
                  </p>
                  <button class="btn secondary" type="button">
                    Add Family Member
                  </button>
                </div>
                <div class="panel-card">
                  <h3>Learning Together</h3>
                  <p>
                    Make financial planning fun with shared lessons.
                  </p>
                  <p class="muted">Next family check-in: Sunday 7pm</p>
                </div>
              </div>
            </div>

            <!-- Financial Literacy Hub / Learn Tab -->
            <div class="tab-panel" data-tab="learn">
              <div class="learn-header">
                <h2>Financial Literacy Hub</h2>
                <p class="muted">Build your money knowledge, one lesson at a time</p>
                <div class="learn-stats">
                  <div class="learn-stat">
                    <span class="stat-value" data-learn-completed>0</span>
                    <span class="stat-label">Completed</span>
                  </div>
                  <div class="learn-stat">
                    <span class="stat-value" data-learn-streak>0</span>
                    <span class="stat-label">Day Streak</span>
                  </div>
                  <div class="learn-stat">
                    <span class="stat-value" data-learn-points>0</span>
                    <span class="stat-label">Quiz Points</span>
                  </div>
                </div>
              </div>

              <div class="learn-modules">
                <div class="learn-module" data-module="budgeting">
                  <div class="module-icon budgeting">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="2" y="3" width="20" height="14" rx="2"/><path d="M2 10h20"/>
                    </svg>
                  </div>
                  <div class="module-content">
                    <h3>Budgeting Basics</h3>
                    <p>Master the 50/30/20 rule and build a budget that works</p>
                    <div class="module-progress">
                      <div class="progress"><span style="width: 0%" data-module-progress="budgeting"></span></div>
                      <span class="muted">0/4 lessons</span>
                    </div>
                  </div>
                  <button class="btn primary small" type="button" data-start-module="budgeting">Start</button>
                </div>

                <div class="learn-module" data-module="emergency">
                  <div class="module-icon emergency">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    </svg>
                  </div>
                  <div class="module-content">
                    <h3>Emergency Fund Essentials</h3>
                    <p>Build your financial safety net step by step</p>
                    <div class="module-progress">
                      <div class="progress"><span style="width: 0%" data-module-progress="emergency"></span></div>
                      <span class="muted">0/3 lessons</span>
                    </div>
                  </div>
                  <button class="btn primary small" type="button" data-start-module="emergency">Start</button>
                </div>

                <div class="learn-module" data-module="investing">
                  <div class="module-icon investing">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                    </svg>
                  </div>
                  <div class="module-content">
                    <h3>Investing 101</h3>
                    <p>Understand stocks, bonds, and index funds</p>
                    <div class="module-progress">
                      <div class="progress"><span style="width: 0%" data-module-progress="investing"></span></div>
                      <span class="muted">0/5 lessons</span>
                    </div>
                  </div>
                  <button class="btn primary small" type="button" data-start-module="investing">Start</button>
                </div>

                <div class="learn-module" data-module="debt">
                  <div class="module-icon debt">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="1" y="4" width="22" height="16" rx="2"/><path d="M1 10h22"/>
                    </svg>
                  </div>
                  <div class="module-content">
                    <h3>Debt Destruction</h3>
                    <p>Strategies to eliminate debt faster</p>
                    <div class="module-progress">
                      <div class="progress"><span style="width: 0%" data-module-progress="debt"></span></div>
                      <span class="muted">0/4 lessons</span>
                    </div>
                  </div>
                  <button class="btn primary small" type="button" data-start-module="debt">Start</button>
                </div>

                <div class="learn-module" data-module="psychology">
                  <div class="module-icon psychology">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 2a10 10 0 1010 10A10 10 0 0012 2zm0 6a2 2 0 11-2 2 2 2 0 012-2zm0 10a8 8 0 01-6.25-3 6 6 0 0112.5 0A8 8 0 0112 18z"/>
                    </svg>
                  </div>
                  <div class="module-content">
                    <h3>Money Psychology</h3>
                    <p>Understand your relationship with money</p>
                    <div class="module-progress">
                      <div class="progress"><span style="width: 0%" data-module-progress="psychology"></span></div>
                      <span class="muted">0/3 lessons</span>
                    </div>
                  </div>
                  <button class="btn primary small" type="button" data-start-module="psychology">Start</button>
                </div>
              </div>

              <!-- Quiz Modal (hidden by default) -->
              <div class="quiz-modal" data-quiz-modal hidden>
                <div class="quiz-container">
                  <div class="quiz-header">
                    <h3 data-quiz-title>Quiz</h3>
                    <button class="quiz-close" type="button" data-quiz-close>&times;</button>
                  </div>
                  <div class="quiz-content">
                    <div class="quiz-lesson" data-quiz-lesson></div>
                    <div class="quiz-question" data-quiz-question>
                      <p class="question-text" data-question-text></p>
                      <div class="quiz-options" data-quiz-options></div>
                    </div>
                    <div class="quiz-feedback" data-quiz-feedback hidden>
                      <div class="feedback-icon" data-feedback-icon></div>
                      <p class="feedback-text" data-feedback-text></p>
                      <p class="feedback-explanation" data-feedback-explanation></p>
                    </div>
                  </div>
                  <div class="quiz-footer">
                    <div class="quiz-progress">
                      <span data-quiz-current>1</span> / <span data-quiz-total>3</span>
                    </div>
                    <button class="btn primary" type="button" data-quiz-next hidden>Next Question</button>
                    <button class="btn primary" type="button" data-quiz-finish hidden>Finish Lesson</button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Import Tab -->
            <div class="tab-panel" data-tab="import">
              <div class="import-header">
                <h2>Import Your Statements</h2>
                <p class="muted">Upload bank statements, bills, or expense files. We'll automatically extract and categorize your transactions.</p>
              </div>

              <div class="import-dropzone" data-import-dropzone>
                <div class="dropzone-icon">
                  <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/>
                  </svg>
                </div>
                <h3>Drag & drop your files here</h3>
                <p class="muted">or click to browse</p>
                <input type="file" multiple accept=".csv,.xlsx,.xls,.pdf" data-import-file hidden />
                <div class="import-formats">
                  <span class="format-badge csv">CSV</span>
                  <span class="format-badge excel">Excel</span>
                  <span class="format-badge pdf">PDF</span>
                </div>
              </div>

              <div class="import-supported">
                <h4>Supported Banks & Services</h4>
                <div class="bank-logos">
                  <div class="bank-logo" title="Monzo">
                    <span>Monzo</span>
                  </div>
                  <div class="bank-logo" title="Starling">
                    <span>Starling</span>
                  </div>
                  <div class="bank-logo" title="HSBC">
                    <span>HSBC</span>
                  </div>
                  <div class="bank-logo" title="Barclays">
                    <span>Barclays</span>
                  </div>
                  <div class="bank-logo" title="NatWest">
                    <span>NatWest</span>
                  </div>
                  <div class="bank-logo" title="Lloyds">
                    <span>Lloyds</span>
                  </div>
                  <div class="bank-logo" title="Santander">
                    <span>Santander</span>
                  </div>
                  <div class="bank-logo" title="Virgin Media">
                    <span>Virgin Media</span>
                  </div>
                  <div class="bank-logo" title="Sky">
                    <span>Sky</span>
                  </div>
                  <div class="bank-logo" title="Generic PDF">
                    <span>Any PDF</span>
                  </div>
                </div>
                <p class="muted">Don't see your bank? We can still parse most statement formats using smart pattern matching.</p>
              </div>

              <div class="import-history" data-import-history>
                <h4>Recent Imports</h4>
                <div class="import-history-list" data-import-history-list>
                  <p class="muted">No imports yet. Upload a file to get started.</p>
                </div>
              </div>

              <!-- Manual Transaction Entry -->
              <div class="transactions-section">
                <div class="transactions-header">
                  <h3>Quick Add Transaction</h3>
                  <button class="btn small primary" type="button" data-add-transaction>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
                    </svg>
                    Add
                  </button>
                </div>
                <p class="muted">Log cash spending and other transactions between imports</p>

                <!-- Quick Add Form -->
                <div class="quick-transaction-form" data-quick-transaction-form>
                  <div class="transaction-type-toggle">
                    <button class="type-btn is-active" type="button" data-txn-type="expense">Expense</button>
                    <button class="type-btn" type="button" data-txn-type="income">Income</button>
                  </div>
                  <div class="transaction-inputs">
                    <label>
                      Amount (£)
                      <input type="number" min="0" step="0.01" placeholder="0.00" data-txn-amount />
                    </label>
                    <label>
                      Category
                      <select data-txn-category>
                        <optgroup label="Housing">
                          <option value="mortgage">Mortgage/Rent</option>
                          <option value="councilTax">Council Tax</option>
                          <option value="homeInsurance">Home Insurance</option>
                        </optgroup>
                        <optgroup label="Utilities">
                          <option value="energy">Energy</option>
                          <option value="water">Water</option>
                          <option value="internet">Internet</option>
                        </optgroup>
                        <optgroup label="Transport">
                          <option value="fuel">Fuel</option>
                          <option value="publicTransport">Public Transport</option>
                          <option value="carInsurance">Car Insurance</option>
                        </optgroup>
                        <optgroup label="Food & Drink">
                          <option value="groceries" selected>Groceries</option>
                          <option value="diningOut">Dining Out</option>
                          <option value="coffeeSnacks">Coffee/Snacks</option>
                        </optgroup>
                        <optgroup label="Personal">
                          <option value="clothing">Clothing</option>
                          <option value="personalCare">Personal Care</option>
                          <option value="entertainment">Entertainment</option>
                          <option value="subscriptions">Subscriptions</option>
                          <option value="gym">Gym</option>
                        </optgroup>
                        <optgroup label="Other">
                          <option value="other">Other</option>
                        </optgroup>
                      </select>
                    </label>
                    <label>
                      Date
                      <input type="date" data-txn-date />
                    </label>
                    <label>
                      Payment Method
                      <select data-txn-method>
                        <option value="cash">Cash</option>
                        <option value="card" selected>Card</option>
                        <option value="bank-transfer">Bank Transfer</option>
                        <option value="direct-debit">Direct Debit</option>
                      </select>
                    </label>
                  </div>
                  <label class="full-width">
                    Description (optional)
                    <input type="text" placeholder="e.g. Weekly shop at Tesco" data-txn-description />
                  </label>
                  <button class="btn primary full-width" type="button" data-save-transaction>
                    Save Transaction
                  </button>
                </div>

                <!-- Running Balance -->
                <div class="running-balance">
                  <div class="balance-card">
                    <span class="balance-label">This Month's Spending</span>
                    <span class="balance-value negative" data-month-spending>£0</span>
                  </div>
                  <div class="balance-card">
                    <span class="balance-label">This Month's Income</span>
                    <span class="balance-value positive" data-month-income>£0</span>
                  </div>
                  <div class="balance-card">
                    <span class="balance-label">Net</span>
                    <span class="balance-value" data-month-net>£0</span>
                  </div>
                </div>

                <!-- Recent Transactions -->
                <div class="recent-transactions">
                  <div class="transactions-list-header">
                    <h4>Recent Transactions</h4>
                    <div class="transaction-filters">
                      <select data-txn-filter-category>
                        <option value="all">All Categories</option>
                        <option value="groceries">Groceries</option>
                        <option value="diningOut">Dining Out</option>
                        <option value="transport">Transport</option>
                        <option value="entertainment">Entertainment</option>
                      </select>
                    </div>
                  </div>
                  <div class="transactions-list" data-transactions-list>
                    <p class="muted">No transactions yet. Add your first transaction above.</p>
                  </div>
                </div>
              </div>
            </div>

            <div class="tab-panel" data-tab="profile">
              <!-- Financial Health Score Hero -->
              <div class="health-score-hero">
                <div class="health-score-ring">
                  <svg viewBox="0 0 120 120" class="score-ring-svg">
                    <circle cx="60" cy="60" r="52" class="score-ring-bg"/>
                    <circle cx="60" cy="60" r="52" class="score-ring-fill" data-health-ring/>
                  </svg>
                  <div class="score-ring-center">
                    <span class="score-value" data-health-score>0</span>
                    <span class="score-max">/ 100</span>
                  </div>
                </div>
                <div class="health-score-info">
                  <h2>Your Financial Health Score</h2>
                  <p class="health-status" data-health-status>Getting started</p>
                  <div class="score-trend" data-score-trend>
                    <!-- Trend indicator populated by JS -->
                  </div>
                  <p class="muted">Based on 5 key financial pillars. Updated as you enter your details.</p>
                </div>
              </div>

              <!-- Year on Year Comparison -->
              <div class="yoy-section" data-yoy-comparison>
                <!-- Populated by JavaScript -->
              </div>

              <!-- Score History Chart -->
              <div class="score-history-section">
                <div class="score-history-header">
                  <h3>Score History</h3>
                  <div class="milestones-row" data-milestones></div>
                </div>
                <div class="score-chart-container" data-score-chart>
                  <p class="chart-empty">Score history will appear as you track over time</p>
                </div>
              </div>

              <!-- Health Score Breakdown -->
              <div class="health-breakdown">
                <div class="health-pillar" data-pillar="emergency">
                  <div class="pillar-header">
                    <span class="pillar-icon">🛡️</span>
                    <span class="pillar-name">Emergency Buffer</span>
                    <span class="pillar-trend" data-pillar-trend="emergency"></span>
                    <span class="pillar-score" data-pillar-score="emergency">0/25</span>
                  </div>
                  <div class="pillar-bar"><div class="pillar-fill" data-pillar-fill="emergency"></div></div>
                  <p class="pillar-tip" data-pillar-tip="emergency">Add your savings to see your emergency cover</p>
                </div>
                <div class="health-pillar" data-pillar="debt">
                  <div class="pillar-header">
                    <span class="pillar-icon">📊</span>
                    <span class="pillar-name">Debt-to-Income</span>
                    <span class="pillar-trend" data-pillar-trend="debt"></span>
                    <span class="pillar-score" data-pillar-score="debt">0/25</span>
                  </div>
                  <div class="pillar-bar"><div class="pillar-fill" data-pillar-fill="debt"></div></div>
                  <p class="pillar-tip" data-pillar-tip="debt">Enter your debts to calculate your ratio</p>
                </div>
                <div class="health-pillar" data-pillar="savings">
                  <div class="pillar-header">
                    <span class="pillar-icon">💰</span>
                    <span class="pillar-name">Savings Rate</span>
                    <span class="pillar-trend" data-pillar-trend="savings"></span>
                    <span class="pillar-score" data-pillar-score="savings">0/20</span>
                  </div>
                  <div class="pillar-bar"><div class="pillar-fill" data-pillar-fill="savings"></div></div>
                  <p class="pillar-tip" data-pillar-tip="savings">Your surplus as % of income</p>
                </div>
                <div class="health-pillar" data-pillar="credit">
                  <div class="pillar-header">
                    <span class="pillar-icon">💳</span>
                    <span class="pillar-name">Credit Utilization</span>
                    <span class="pillar-trend" data-pillar-trend="credit"></span>
                    <span class="pillar-score" data-pillar-score="credit">0/15</span>
                  </div>
                  <div class="pillar-bar"><div class="pillar-fill" data-pillar-fill="credit"></div></div>
                  <p class="pillar-tip" data-pillar-tip="credit">Add your credit score details below</p>
                </div>
                <div class="health-pillar" data-pillar="protection">
                  <div class="pillar-header">
                    <span class="pillar-icon">🏥</span>
                    <span class="pillar-name">Protection Cover</span>
                    <span class="pillar-trend" data-pillar-trend="protection"></span>
                    <span class="pillar-score" data-pillar-score="protection">0/15</span>
                  </div>
                  <div class="pillar-bar"><div class="pillar-fill" data-pillar-fill="protection"></div></div>
                  <p class="pillar-tip" data-pillar-tip="protection">Review your insurance coverage</p>
                </div>
              </div>

              <!-- Net Worth Section -->
              <div class="networth-section">
                <div class="networth-header">
                  <h3>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/>
                    </svg>
                    Your Net Worth
                  </h3>
                  <div class="networth-total">
                    <span class="networth-label">Total</span>
                    <span class="networth-value" data-networth-total>£0</span>
                  </div>
                </div>

                <div class="networth-bars">
                  <div class="networth-bar assets-bar">
                    <span class="bar-label">Assets</span>
                    <div class="bar-track"><div class="bar-fill" data-assets-fill></div></div>
                    <span class="bar-value" data-assets-total>£0</span>
                  </div>
                  <div class="networth-bar liabilities-bar">
                    <span class="bar-label">Liabilities</span>
                    <div class="bar-track"><div class="bar-fill" data-liabilities-fill></div></div>
                    <span class="bar-value" data-liabilities-total>£0</span>
                  </div>
                </div>

                <!-- Net Worth Chart -->
                <div class="networth-chart-section">
                  <h4>Net Worth Over Time</h4>
                  <div class="networth-chart-container" data-networth-chart>
                    <p class="chart-empty">Track for 2+ months to see trend</p>
                  </div>
                </div>

                <!-- Assets Accordion -->
                <div class="networth-accordion">
                  <button class="accordion-trigger" type="button" data-accordion="assets">
                    <span class="accordion-icon">💎</span>
                    <span class="accordion-title">Assets - What You Own</span>
                    <span class="accordion-value" data-assets-total-small>£0</span>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="accordion-chevron">
                      <polyline points="6 9 12 15 18 9"/>
                    </svg>
                  </button>
                  <div class="accordion-content" data-accordion-content="assets">
                    <div class="asset-group">
                      <h4>Cash & Savings</h4>
                      <p class="group-help">Money you can access quickly - current accounts, savings, ISAs</p>
                      <div class="form-grid compact">
                        <label>
                          Current & Savings Accounts
                          <input type="number" min="0" placeholder="5000" data-asset="cashSavings" />
                        </label>
                        <label>
                          Cash ISA Balance
                          <input type="number" min="0" placeholder="10000" data-asset="cashISA" />
                        </label>
                      </div>
                    </div>
                    <div class="asset-group">
                      <h4>Investments</h4>
                      <p class="group-help">Stocks, shares, ISAs, and other investments</p>
                      <div class="form-grid compact">
                        <label>
                          Stocks & Shares ISA
                          <input type="number" min="0" placeholder="15000" data-asset="stocksISA" />
                        </label>
                        <label>
                          General Investments
                          <input type="number" min="0" placeholder="5000" data-asset="generalInvestments" />
                        </label>
                        <label>
                          Cryptocurrency
                          <input type="number" min="0" placeholder="1000" data-asset="crypto" />
                        </label>
                      </div>
                    </div>
                    <div class="asset-group">
                      <h4>Pension</h4>
                      <p class="group-help">Total value of all your pension pots (check your statements or pension provider)</p>
                      <div class="form-grid compact">
                        <label>
                          Total Pension Value
                          <input type="number" min="0" placeholder="50000" data-asset="pensionValue" />
                        </label>
                      </div>
                    </div>
                    <div class="asset-group">
                      <h4>Property & Vehicles</h4>
                      <p class="group-help">Estimated current market value of property you own</p>
                      <div class="form-grid compact">
                        <label>
                          Primary Home Value
                          <input type="number" min="0" placeholder="300000" data-asset="propertyValue" />
                        </label>
                        <label>
                          Other Property Value
                          <input type="number" min="0" placeholder="0" data-asset="otherPropertyValue" />
                        </label>
                        <label>
                          Vehicle(s) Value
                          <input type="number" min="0" placeholder="8000" data-asset="vehicleValue" />
                        </label>
                        <label>
                          Other Assets
                          <input type="number" min="0" placeholder="0" data-asset="otherAssets" />
                        </label>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Liabilities Accordion -->
                <div class="networth-accordion">
                  <button class="accordion-trigger" type="button" data-accordion="liabilities">
                    <span class="accordion-icon">📉</span>
                    <span class="accordion-title">Liabilities - What You Owe</span>
                    <span class="accordion-value" data-liabilities-total-small>£0</span>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="accordion-chevron">
                      <polyline points="6 9 12 15 18 9"/>
                    </svg>
                  </button>
                  <div class="accordion-content" data-accordion-content="liabilities">
                    <div class="asset-group">
                      <h4>Mortgages</h4>
                      <p class="group-help">Outstanding balance remaining on your mortgage(s)</p>
                      <div class="form-grid compact">
                        <label>
                          Primary Mortgage Balance
                          <input type="number" min="0" placeholder="200000" data-liability="mortgageBalance" />
                        </label>
                        <label>
                          Other Mortgages
                          <input type="number" min="0" placeholder="0" data-liability="otherMortgages" />
                        </label>
                      </div>
                    </div>
                    <div class="asset-group">
                      <h4>Loans & Finance</h4>
                      <p class="group-help">Outstanding balances on personal loans and car finance</p>
                      <div class="form-grid compact">
                        <label>
                          Personal Loans Balance
                          <input type="number" min="0" placeholder="0" data-liability="personalLoansBalance" />
                        </label>
                        <label>
                          Car Finance (PCP/HP)
                          <input type="number" min="0" placeholder="0" data-liability="carFinanceBalance" />
                        </label>
                        <label>
                          Student Loan Balance
                          <input type="number" min="0" placeholder="0" data-liability="studentLoanBalance" />
                        </label>
                      </div>
                    </div>
                    <div class="asset-group">
                      <h4>Credit & Overdrafts</h4>
                      <p class="group-help">Current balances on credit cards and overdrafts</p>
                      <div class="form-grid compact">
                        <label>
                          Total Credit Card Debt
                          <input type="number" min="0" placeholder="0" data-liability="creditCardBalance" />
                        </label>
                        <label>
                          Overdraft Used
                          <input type="number" min="0" placeholder="0" data-liability="overdraftBalance" />
                        </label>
                        <label>
                          Other Debts
                          <input type="number" min="0" placeholder="0" data-liability="otherDebts" />
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Credit Score Section -->
              <div class="credit-section">
                <div class="credit-header">
                  <h3>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="2" y="5" width="20" height="14" rx="2"/><line x1="2" y1="10" x2="22" y2="10"/>
                    </svg>
                    Credit Score
                  </h3>
                </div>
                <div class="credit-score-card">
                  <div class="credit-score-display">
                    <div class="credit-score-gauge">
                      <div class="gauge-value" data-credit-gauge>
                        <span class="gauge-number" data-credit-score-display>---</span>
                        <span class="gauge-label">out of 999</span>
                      </div>
                      <div class="gauge-band" data-credit-band>Not set</div>
                    </div>
                    <div class="credit-score-input">
                      <p class="credit-help">Check your score for free at ClearScore, Credit Karma, or MSE Credit Club</p>
                      <div class="form-grid compact">
                        <label>
                          Your Credit Score
                          <input type="number" min="0" max="999" placeholder="750" data-credit="score" />
                        </label>
                        <label>
                          Score Provider
                          <select data-credit="provider">
                            <option value="">Select...</option>
                            <option value="experian">Experian (0-999)</option>
                            <option value="equifax">Equifax / ClearScore (0-700)</option>
                            <option value="transunion">TransUnion / Credit Karma (0-710)</option>
                          </select>
                        </label>
                      </div>
                    </div>
                  </div>
                  <div class="credit-utilization">
                    <h4>Credit Utilization</h4>
                    <p class="group-help">Lower is better - aim for under 30% of your available credit</p>
                    <div class="form-grid compact">
                      <label>
                        Total Credit Limit
                        <input type="number" min="0" placeholder="10000" data-credit="creditLimit" />
                      </label>
                      <label>
                        Credit Currently Used
                        <input type="number" min="0" placeholder="2000" data-credit="creditUsed" />
                      </label>
                    </div>
                    <div class="utilization-bar">
                      <div class="utilization-fill" data-utilization-fill></div>
                      <span class="utilization-percent" data-utilization-percent>0%</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Insurance Coverage Section -->
              <div class="insurance-section">
                <div class="insurance-header">
                  <h3>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    </svg>
                    Protection & Insurance
                  </h3>
                  <p class="muted">Tick what you have in place</p>
                </div>
                <div class="insurance-grid">
                  <label class="insurance-item">
                    <input type="checkbox" data-insurance="lifeInsurance" />
                    <div class="insurance-info">
                      <span class="insurance-name">Life Insurance</span>
                      <span class="insurance-desc">Pays out to your family if you die</span>
                    </div>
                    <input type="number" min="0" placeholder="Cover amount" class="insurance-amount" data-insurance-amount="lifeInsuranceAmount" />
                  </label>
                  <label class="insurance-item">
                    <input type="checkbox" data-insurance="incomeProtection" />
                    <div class="insurance-info">
                      <span class="insurance-name">Income Protection</span>
                      <span class="insurance-desc">Replaces income if you can't work due to illness</span>
                    </div>
                    <input type="number" min="0" max="100" placeholder="% of salary" class="insurance-amount" data-insurance-amount="incomeProtectionPercent" />
                  </label>
                  <label class="insurance-item">
                    <input type="checkbox" data-insurance="criticalIllness" />
                    <div class="insurance-info">
                      <span class="insurance-name">Critical Illness</span>
                      <span class="insurance-desc">Lump sum if diagnosed with serious illness</span>
                    </div>
                    <input type="number" min="0" placeholder="Cover amount" class="insurance-amount" data-insurance-amount="criticalIllnessAmount" />
                  </label>
                  <label class="insurance-item">
                    <input type="checkbox" data-insurance="homeContents" />
                    <div class="insurance-info">
                      <span class="insurance-name">Home Contents</span>
                      <span class="insurance-desc">Covers your belongings inside your home</span>
                    </div>
                  </label>
                  <label class="insurance-item">
                    <input type="checkbox" data-insurance="buildings" />
                    <div class="insurance-info">
                      <span class="insurance-name">Buildings Insurance</span>
                      <span class="insurance-desc">Covers the structure of your home (usually required for mortgages)</span>
                    </div>
                  </label>
                </div>
              </div>

              <!-- Vulnerability Assessment -->
              <div class="vulnerability-section">
                <div class="vulnerability-header">
                  <h3>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/>
                      <line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/>
                    </svg>
                    Vulnerability Check
                  </h3>
                  <p class="muted">Areas that need attention based on your financial profile</p>
                </div>
                <div class="vulnerability-list" data-vulnerability-list>
                  <!-- Populated by JavaScript -->
                </div>
              </div>

              <!-- Improvement Roadmap -->
              <div class="roadmap-section">
                <div class="roadmap-header">
                  <h3>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
                      <polyline points="22 4 12 14.01 9 11.01"/>
                    </svg>
                    Your Improvement Roadmap
                  </h3>
                  <p class="muted">Prioritized steps to strengthen your financial health</p>
                </div>
                <div class="roadmap-list" data-roadmap-list>
                  <!-- Populated by JavaScript -->
                </div>
              </div>

              <!-- Financial Snapshot Charts -->
              <div class="snapshot-section">
                <div class="snapshot-header">
                  <h3>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M21.21 15.89A10 10 0 118 2.83"/><path d="M22 12A10 10 0 0012 2v10z"/>
                    </svg>
                    Financial Snapshot
                  </h3>
                  <p class="muted">Visual overview of your finances</p>
                </div>

                <div class="snapshot-grid">
                  <!-- Income vs Expenses -->
                  <div class="snapshot-card">
                    <h4>Income vs Expenses</h4>
                    <div class="snapshot-chart" data-income-expense>
                      <p class="chart-empty">Add income & expenses</p>
                    </div>
                  </div>

                  <!-- Emergency Fund Gauge -->
                  <div class="snapshot-card">
                    <h4>Emergency Runway</h4>
                    <div class="snapshot-chart" data-emergency-gauge>
                      <p class="chart-empty">Add savings & expenses</p>
                    </div>
                  </div>

                  <!-- Spending Breakdown -->
                  <div class="snapshot-card wide">
                    <h4>Spending Breakdown</h4>
                    <div class="snapshot-chart" data-spending-donut>
                      <p class="chart-empty">Add your expenses</p>
                    </div>
                  </div>

                  <!-- Asset Allocation -->
                  <div class="snapshot-card">
                    <h4>Asset Allocation</h4>
                    <div class="snapshot-chart" data-asset-pie>
                      <p class="chart-empty">Add your assets</p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Smart Insights Section -->
              <div class="insights-section">
                <div class="insights-header">
                  <h3>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/>
                    </svg>
                    Smart Insights
                  </h3>
                  <p class="muted">How you compare to UK averages</p>
                </div>

                <!-- Peer Comparison Cards -->
                <div class="peer-insights" data-peer-insights>
                  <!-- Populated by JavaScript -->
                </div>

                <!-- Spending Trends -->
                <div class="insights-subsection">
                  <h4>Spending vs UK Average</h4>
                  <div class="spending-trends" data-spending-trends>
                    <!-- Populated by JavaScript -->
                  </div>
                </div>

                <!-- Subscription Audit -->
                <div class="insights-subsection">
                  <h4>
                    <span>Subscription Audit</span>
                    <span class="sub-total" data-subscription-total></span>
                  </h4>
                  <div class="subscription-list" data-subscription-audit>
                    <!-- Populated by JavaScript -->
                  </div>
                </div>
              </div>

              <!-- What-If Calculator -->
              <div class="whatif-section">
                <div class="whatif-header">
                  <h3>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/>
                    </svg>
                    What If Calculator
                  </h3>
                  <p class="muted">See the impact of small changes</p>
                </div>

                <div class="whatif-controls">
                  <div class="whatif-scenario-select">
                    <label>Scenario</label>
                    <select data-whatif-scenario>
                      <option value="extraSavings">Save extra each month</option>
                      <option value="debtPayoff">Pay extra on debt</option>
                      <option value="emergencyRunway">Job loss runway</option>
                      <option value="goalAcceleration">Accelerate goals</option>
                    </select>
                  </div>
                  <div class="whatif-slider-wrap">
                    <label>Amount: <span data-whatif-amount>£100</span></label>
                    <input type="range" min="25" max="500" step="25" value="100" data-whatif-slider />
                    <div class="slider-labels">
                      <span>£25</span>
                      <span>£500</span>
                    </div>
                  </div>
                </div>

                <div class="whatif-results" data-whatif-results>
                  <!-- Populated by JavaScript -->
                </div>
              </div>

              <!-- Smart Tips -->
              <div class="tips-section">
                <div class="tips-header">
                  <h3>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M9 18h6"/><path d="M10 22h4"/>
                      <path d="M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0018 8 6 6 0 006 8c0 1 .23 2.23 1.5 3.5A4.61 4.61 0 018.91 14"/>
                    </svg>
                    Personalized Tips
                  </h3>
                  <p class="muted">Actions to improve your finances</p>
                </div>
                <div class="smart-tips" data-smart-tips>
                  <!-- Populated by JavaScript -->
                </div>
              </div>

              <!-- Gamification Section -->
              <div class="gamification-section">
                <div class="gamification-header">
                  <h3>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 15l-2 5l9-9l-5 2l2-5l-9 9l5-2z"/>
                    </svg>
                    Achievements & Challenges
                  </h3>
                  <div class="gamification-stats">
                    <div class="stat-pill">
                      <span class="stat-icon">🔥</span>
                      <span class="stat-value" data-streak-count>0</span>
                      <span class="stat-label">day streak</span>
                    </div>
                    <div class="stat-pill">
                      <span class="stat-icon">⭐</span>
                      <span class="stat-value" data-total-points>0</span>
                      <span class="stat-label">points</span>
                    </div>
                  </div>
                </div>

                <!-- Badges -->
                <div class="badges-section">
                  <div class="badges-header">
                    <h4>Your Badges</h4>
                    <span class="badges-count" data-badges-count>0/20</span>
                  </div>
                  <div class="badges-list" data-badges-list>
                    <p class="no-badges">Complete actions to unlock badges</p>
                  </div>
                </div>

                <!-- Monthly Challenges -->
                <div class="challenges-section">
                  <h4>Monthly Challenges</h4>
                  <p class="challenges-intro">Complete challenges to earn bonus points</p>
                  <div class="challenges-list" data-challenges-list>
                    <!-- Populated by JavaScript -->
                  </div>
                </div>
              </div>

              <!-- Quick Profile Settings -->
              <div class="profile-settings">
                <h3>Profile Settings</h3>
                <div class="form-grid compact">
                  <label>
                    Your Name
                    <input type="text" placeholder="Your name" data-field="name" />
                  </label>
                  <label>
                    Annual Salary
                    <input type="number" min="0" data-field="annualSalary" />
                  </label>
                </div>
                <div class="profile-persona">
                  <span class="persona-label">Money Persona:</span>
                  <span class="persona-value" data-profile-persona>Builder</span>
                </div>
              </div>
            </div>

          </div>
        </section>
      </main>
    </div>

    <!-- Confetti Container for Celebrations -->
    <div class="confetti-container" data-confetti-container></div>

    <!-- Celebration Modal -->
    <div class="celebration-modal" data-celebration-modal hidden>
      <div class="celebration-content">
        <div class="celebration-icon" data-celebration-icon>🎉</div>
        <h2 class="celebration-title" data-celebration-title>Milestone Reached!</h2>
        <p class="celebration-message" data-celebration-message>You're making amazing progress!</p>
        <div class="celebration-badge" data-celebration-badge>
          <div class="badge-icon">🏆</div>
          <div class="badge-info">
            <span class="badge-name" data-badge-name>Achievement Unlocked</span>
            <span class="badge-desc" data-badge-desc>Keep going!</span>
          </div>
        </div>
        <div class="celebration-stats" data-celebration-stats>
          <div class="celebration-stat">
            <span class="stat-value" data-celebration-progress>25%</span>
            <span class="stat-label">Progress</span>
          </div>
          <div class="celebration-stat">
            <span class="stat-value" data-celebration-saved>£0</span>
            <span class="stat-label">Saved</span>
          </div>
          <div class="celebration-stat">
            <span class="stat-value" data-celebration-remaining>£0</span>
            <span class="stat-label">To Go</span>
          </div>
        </div>
        <button class="btn primary" type="button" data-celebration-close>Keep Going!</button>
        <button class="btn ghost" type="button" data-celebration-share>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/>
            <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/>
          </svg>
          Share Achievement
        </button>
      </div>
    </div>

    <!-- Budget Planner Modal -->
    <div class="budget-planner-modal" data-budget-planner-modal hidden>
      <div class="planner-content">
        <div class="planner-header">
          <h2>Budget Reallocation Planner</h2>
          <p class="muted">Drag sliders to see how changes affect your goals</p>
          <button class="planner-close" type="button" data-planner-close>&times;</button>
        </div>
        <div class="planner-body">
          <div class="planner-categories" data-planner-categories>
            <!-- Categories will be populated by JS -->
          </div>
          <div class="planner-impact">
            <h3>Impact Preview</h3>
            <div class="impact-cards">
              <div class="impact-card">
                <span class="impact-label">Monthly Savings</span>
                <span class="impact-value" data-impact-savings>+£0</span>
              </div>
              <div class="impact-card">
                <span class="impact-label">Goal Timeline</span>
                <span class="impact-value" data-impact-timeline>No change</span>
              </div>
              <div class="impact-card">
                <span class="impact-label">Emergency Fund</span>
                <span class="impact-value" data-impact-emergency>+0 months</span>
              </div>
            </div>
            <div class="impact-chart" data-impact-chart></div>
          </div>
        </div>
        <div class="planner-footer">
          <button class="btn ghost" type="button" data-planner-reset>Reset Changes</button>
          <button class="btn primary" type="button" data-planner-apply>Apply Changes</button>
        </div>
      </div>
    </div>

    <!-- Statement Import Review Modal -->
    <div class="import-modal" data-import-modal hidden>
      <div class="import-modal-content">
        <div class="import-modal-header">
          <div class="import-modal-title">
            <h2>Review Imported Transactions</h2>
            <p class="muted" data-import-filename>filename.csv</p>
          </div>
          <button class="import-modal-close" type="button" data-import-close>&times;</button>
        </div>

        <div class="import-progress" data-import-progress hidden>
          <div class="progress-bar">
            <div class="progress-fill" data-progress-fill></div>
          </div>
          <p class="progress-text" data-progress-text>Processing file...</p>
        </div>

        <div class="import-summary" data-import-summary hidden>
          <div class="summary-stats">
            <div class="summary-stat">
              <span class="stat-value" data-import-total>0</span>
              <span class="stat-label">Transactions Found</span>
            </div>
            <div class="summary-stat">
              <span class="stat-value" data-import-income>£0</span>
              <span class="stat-label">Total Income</span>
            </div>
            <div class="summary-stat">
              <span class="stat-value" data-import-expense>£0</span>
              <span class="stat-label">Total Expenses</span>
            </div>
            <div class="summary-stat">
              <span class="stat-value" data-import-recurring>0</span>
              <span class="stat-label">Recurring</span>
            </div>
          </div>
        </div>

        <div class="import-transactions" data-import-transactions>
          <div class="transaction-filters">
            <button class="filter-btn active" data-filter="all">All</button>
            <button class="filter-btn" data-filter="income">Income</button>
            <button class="filter-btn" data-filter="expense">Expenses</button>
            <button class="filter-btn" data-filter="recurring">Recurring</button>
            <button class="filter-btn" data-filter="uncategorized">Uncategorized</button>
          </div>
          <div class="transaction-list" data-transaction-list>
            <!-- Transactions populated by JS -->
          </div>
        </div>

        <div class="import-modal-footer">
          <div class="import-actions-left">
            <button class="btn ghost" type="button" data-import-select-all>Select All</button>
            <button class="btn ghost" type="button" data-import-deselect-all>Deselect All</button>
          </div>
          <div class="import-actions-right">
            <button class="btn ghost" type="button" data-import-cancel>Cancel</button>
            <button class="btn primary" type="button" data-import-apply>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20 6 9 17 4 12"/>
              </svg>
              Apply to Budget
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Open Budget Planner button (floating) -->
    <button class="fab-button" type="button" data-open-planner title="Budget Planner">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 20V10M18 20V4M6 20v-4"/>
      </svg>
    </button>

    <!-- External Libraries for file parsing (with SRI integrity hashes) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"
            integrity="sha512-r22gChDnGvBylk90+2e/ycr3RVrDi8DIOkIGNhJlKfuyQM4tIRAI062MaV8sfjQKYVGjOBaZBOA87z+IhZE9DA=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"
            integrity="sha512-q+4liFwdPC4nh5jPqMPgL4w8PO0sGgpuMpmOHBbLXCn8xEj9C1pmRdBFr/g58bRCTqXB2LRyfE0T1HNDlEoBwg=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"></script>
    <script>
      // Configure PDF.js worker
      if (typeof pdfjsLib !== 'undefined') {
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
      }
    </script>

    <script src="app-config.js" defer></script>
    <script src="firebase-config.js" defer></script>
    <script src="firebase-init.js" defer></script>
    <script src="app.js" defer></script>
  </body>
</html>
